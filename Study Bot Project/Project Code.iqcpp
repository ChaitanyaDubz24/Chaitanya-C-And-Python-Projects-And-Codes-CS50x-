{"mode":"Text","hardwareTarget":"brain","textContent":"#pragma region VEXcode Generated Robot Configuration\n// Make sure all required headers are included.\n#include <stdio.h>\n#include <stdlib.h>\n#include <stdbool.h>\n#include <math.h>\n#include <string.h>\n\n\n#include \"vex.h\"\n\nusing namespace vex;\n\n// Brain should be defined by default\nbrain Brain;\n\n\n// START IQ MACROS\n#define waitUntil(condition)                                                   \\\n  do {                                                                         \\\n    wait(5, msec);                                                             \\\n  } while (!(condition))\n\n#define repeat(iterations)                                                     \\\n  for (int iterator = 0; iterator < iterations; iterator++)\n// END IQ MACROS\n\n\n// Robot configuration code.\ninertial BrainInertial = inertial();\nmotor MotorCatapultH = motor(PORT10, false);\nmotor MotorCatapultV = motor(PORT5, true);\noptical Optical8 = optical(PORT8);\ndistance Distance1 = distance(PORT1);\nbumper Bumper3 = bumper(PORT3);\ntouchled TouchLED9 = touchled(PORT9);\nmotor MotorPhoneJail = motor(PORT6, false);\nmotor MotorDispensor = motor(PORT2, false);\n\n\n// generating and setting random seed\nvoid initializeRandomSeed(){\n  wait(100,msec);\n  double xAxis = BrainInertial.acceleration(xaxis) * 1000;\n  double yAxis = BrainInertial.acceleration(yaxis) * 1000;\n  double zAxis = BrainInertial.acceleration(zaxis) * 1000;\n  // Combine these values into a single integer\n  int seed = int(\n    xAxis + yAxis + zAxis\n  );\n  // Set the seed\n  srand(seed); \n}\n\n// Converts a color to a string\nconst char* convertColorToString(color col) {\n  if (col == colorType::red) return \"red\";\n  else if (col == colorType::green) return \"green\";\n  else if (col == colorType::blue) return \"blue\";\n  else if (col == colorType::white) return \"white\";\n  else if (col == colorType::yellow) return \"yellow\";\n  else if (col == colorType::orange) return \"orange\";\n  else if (col == colorType::purple) return \"purple\";\n  else if (col == colorType::cyan) return \"cyan\";\n  else if (col == colorType::black) return \"black\";\n  else if (col == colorType::transparent) return \"transparent\";\n  else if (col == colorType::red_violet) return \"red_violet\";\n  else if (col == colorType::violet) return \"violet\";\n  else if (col == colorType::blue_violet) return \"blue_violet\";\n  else if (col == colorType::blue_green) return \"blue_green\";\n  else if (col == colorType::yellow_green) return \"yellow_green\";\n  else if (col == colorType::yellow_orange) return \"yellow_orange\";\n  else if (col == colorType::red_orange) return \"red_orange\";\n  else if (col == colorType::none) return \"none\";\n  else return \"unknown\";\n}\n\n\n// Convert colorType to string\nconst char* convertColorToString(colorType col) {\n  if (col == colorType::red) return \"red\";\n  else if (col == colorType::green) return \"green\";\n  else if (col == colorType::blue) return \"blue\";\n  else if (col == colorType::white) return \"white\";\n  else if (col == colorType::yellow) return \"yellow\";\n  else if (col == colorType::orange) return \"orange\";\n  else if (col == colorType::purple) return \"purple\";\n  else if (col == colorType::cyan) return \"cyan\";\n  else if (col == colorType::black) return \"black\";\n  else if (col == colorType::transparent) return \"transparent\";\n  else if (col == colorType::red_violet) return \"red_violet\";\n  else if (col == colorType::violet) return \"violet\";\n  else if (col == colorType::blue_violet) return \"blue_violet\";\n  else if (col == colorType::blue_green) return \"blue_green\";\n  else if (col == colorType::yellow_green) return \"yellow_green\";\n  else if (col == colorType::yellow_orange) return \"yellow_orange\";\n  else if (col == colorType::red_orange) return \"red_orange\";\n  else if (col == colorType::none) return \"none\";\n  else return \"unknown\";\n}\n\n\nvoid vexcodeInit() {\n\n  // Initializing random seed.\n  initializeRandomSeed(); \n}\n\n#pragma endregion VEXcode Generated Robot Configuration\n\n//----------------------------------------------------------------------------\n//                                                                            \n//    Module:       main.cpp                                                  \n//    Author:       Tired                                                \n//    Created:      Forcibly                                                    \n//    Description:  IQ project                                                \n//                                                                            \n//----------------------------------------------------------------------------\n\n// Include the IQ Library\n#include \"iq_cpp.h\"\n#include  \"vex.h\"\n#include <string>\n\n// Allows for easier use of the VEX Library\nusing namespace vex;\n\nvoid configureAllSensors(){\n  BrainInertial.calibrate();\n  wait(2,seconds);\n  BrainInertial.setHeading(0,degrees);\n  BrainInertial.setRotation(0,degrees);\n  MotorCatapultH.setPosition(0,turns);\n  MotorCatapultV.setPosition(0,turns);\n  Brain.Screen.clearScreen();\n  Brain.Screen.setFont(mono15);\n  //Optical3.setLight(ledState::on);\n}\n\n// ===== Constants =====\nconst int PERSON_THRESHOLD = 5;  \nconst int SWEEP_SPEED = 10;            \nconst int LAUNCH_SPEED = 100;\nconst int RESET_SPEED = 10;          \nconst int SWEEP_DELAY = 50;            \nconst int LAUNCH_DURATION = 2000;      \nconst int RESET_DURATION = 2000;\n\nvoid touchPressed() \n{\n  while(!TouchLED9.pressing()) \n  {}\n  while(TouchLED9.pressing())\n  {}\n}\n\n\nbool doorLock = false;\nconst int PJ_DOOR_SPEED = 50;\n\nvoid phoneJailDoor() \n{\n  Brain.Screen.clearScreen();\n  Brain.Screen.setCursor(1,1);\n  Brain.Screen.print(\"Press Touch \");\n  Brain.Screen.setCursor(2,1);\n  Brain.Screen.print(\"To Open/Close\");\n  Brain.Screen.setCursor(3,1);\n  Brain.Screen.print(\"Phone Jail!\");\n\n  touchPressed();\n\n  Brain.Screen.clearScreen();\n  \n  if(doorLock) \n  {\n    Brain.Screen.clearScreen();\n    Brain.Screen.setCursor(1,1);\n    Brain.Screen.print(\"Closing Door!\");\n    MotorPhoneJail.spinFor(forward, 615, degrees, PJ_DOOR_SPEED, velocityUnits::pct);\n    \n  } \n  else \n  {\n    Brain.Screen.clearScreen();\n    Brain.Screen.setCursor(1,1);\n    Brain.Screen.print(\"Opening Door!\");\n    MotorPhoneJail.spinFor(reverse, 615, degrees, PJ_DOOR_SPEED, velocityUnits::pct);\n  }\n\n  doorLock = !doorLock;\n}\n\n\nvoid monitorPhone()\n{\n  Optical8.setLight(ledState::on);\n  \n  bool phoneNotDetected = true;\n  while(phoneNotDetected){\n\n    if (Optical8.color() == blue)\n    {\n    Brain.Screen.clearScreen();\n    Brain.Screen.setCursor(1,1);\n    Brain.Screen.print(\"PUT YOUR PHONE BACK\");\n    wait(1, seconds);\n      \n    }\n\n    else\n    {\n    Brain.Screen.clearScreen();\n    Brain.Screen.setCursor(1,1);\n    Brain.Screen.print(\"GOOD JOB!\");\n    wait(1, seconds);\n    phoneNotDetected = false;\n    //break;\n    }\n  }\n}\n\n\nstd::string pickQuote()\n{\n  std::string quotes[5] = {\n    \"KEEP GOING\",\n    \"YOU GOT THIS\",\n    \"LOCK IN TWIN\",\n    \"YOU ROCK\",\n    \"NEVER BACK DOWN\"\n  };\n\n  int randomNum = 0;\n  randomNum = rand() % 5;\n\n  return quotes[randomNum];\n}\n\n\nvoid launchCatapult(int launchSpeed, int launchDur, int resetDur, int resetSpeed) //DONE\n{\n  MotorCatapultV.setPosition(0, degrees);\n  MotorCatapultV.setVelocity(launchSpeed, percent);\n  MotorCatapultV.spin(forward);\n  wait(launchDur, msec);  \n  MotorCatapultV.stop();\n\n  MotorCatapultV.setVelocity(resetSpeed, percent);\n  MotorCatapultV.spin(reverse);\n  MotorCatapultH.setPosition(0, degrees);\n  wait(resetDur, msec);\n  MotorCatapultV.stop();\n}\n\nvoid searchForPerson()\n{\n  bool movingRight = true;\n  double angle = 0.0;\n\n  MotorCatapultH.setPosition(0, degrees);\n  MotorCatapultH.setVelocity(SWEEP_SPEED, percent);\n\n  while (true) \n  {\n    // Move horizontally\n    if (movingRight) \n    {\n      MotorCatapultH.spin(forward);\n      angle += 1;\n      if (angle >= 20) \n      {\n        movingRight = false;\n      }\n    } \n    \n    else \n    {\n      MotorCatapultH.spin(reverse);\n      angle -= 1;\n\n      if (angle <= -20) \n      {\n        movingRight = true;\n      }\n    }\n\n    // Check distance\n    double distance = Distance1.objectDistance(mm);\n\n    // If a person detected, launch\n    if (distance > 0 && distance <= PERSON_THRESHOLD) \n    {\n      MotorCatapultH.stop();\n      launchCatapult(LAUNCH_SPEED, LAUNCH_DURATION, RESET_DURATION, RESET_SPEED);\n      break; \n    }\n\n    wait(SWEEP_DELAY, msec);\n  }\n\n  MotorCatapultH.setVelocity(RESET_SPEED, percent);\n  \n  double currentPos = MotorCatapultH.position(degrees);\n  \n  if (currentPos > 0) \n  {\n    MotorCatapultH.spin(reverse);\n    while (MotorCatapultH.position(degrees) > 0) \n    {}\n  } \n  \n  else if (currentPos < 0) \n  {\n    MotorCatapultH.spin(forward);\n    while (MotorCatapultH.position(degrees) < 0) \n    {}\n  }\n  \n  MotorCatapultH.stop();\n  MotorCatapultV.stop();\n}\n\nvoid dispensor(bool timer)\n{\n\tMotorDispensor.setPosition(0, degrees);\n\t\n\tif( timer == true)//if the timer runs out the motor will turn one way and the timer must have been on \n\t{\n\t\tMotorDispensor.spin(forward, 10, percent);\n\t\twhile(MotorDispensor.position(degrees) <= 135)\n\t\t{}\n\t\tMotorDispensor.stop();\n\t\t\n\t\twait(1, msec);  \n\t\t\n\t\tMotorDispensor.spin(reverse, 10, percent); \n\t\twhile(MotorDispensor.position(degrees) > -10)\n\t\t{}\n\n    MotorDispensor.stop();\n\t} \t\n\t\n\telse if ( timer == false ) \n\t{\n\t\tMotorDispensor.spin(reverse, 10, percent);\n\t\twhile(MotorDispensor.position(degrees) >= -135)\n\t\t{}\n\t\tMotorDispensor.stop();\n\t\t\n\t\twait(2, seconds); \n\t\t\n\t\tMotorDispensor.spin(forward, 10, percent);\n\t\twhile(MotorDispensor.position(degrees) < 10)\n\t\t{}\n\n    MotorDispensor.stop();\n\t}\n}\n\n\nvoid endBot()\n{\n  if(TouchLED9.pressing() && Bumper3.pressing())\n  {\n    phoneJailDoor();\n    Brain.programStop();\n  }\n}\n\n\nvoid runBreakSession()\n{\n  for(int break_dur = 10; break_dur > 0; break_dur--) \n  {\n    Brain.Screen.clearScreen();\n    Brain.Screen.setCursor(1,1);\n    Brain.Screen.print(\"Break: %d sec left\", break_durs);\n    wait(1, sec);\n  }\n\n  Brain.Screen.clearScreen();\n  Brain.Screen.setCursor(1,1);\n  Brain.Screen.print(\"Break over\");\n  wait(5, sec);\n  Brain.Screen.clearScreen();\n}\n\n\nvoid runStudySession() \n{\n\n  monitorPhone();\n  phoneJailDoor();\n\n  for(int study_dur = 25; study_dur > 0; study_dur--)\n  {\n\n    Brain.Screen.clearScreen();\n    Brain.Screen.setCursor(1,1);\n    Brain.Screen.print(\"Study: %d sec left\", study_dur);\n    wait(1, seconds);\n\n    if(Bumper3.pressing())\n    {\n      wait(4,seconds);\n      \n      if(!Bumper3.pressing())\n      {\n      Brain.Screen.clearScreen();\n      Brain.Screen.setCursor(1, 1);\n      Brain.Screen.print(\"Task Complete\");\n      wait(3, seconds);\n      Brain.Screen.clearScreen();\n      break;\n      }\n\n      else\n      {\n      Brain.Screen.clearScreen();\n      Brain.Screen.setCursor(1, 1);\n      Brain.Screen.print(pickQuote().c_str());//figure out how to print a string\n      wait(3, seconds);\n\n      study_dur = study_dur - 8;\n\n      if(study_dur < 0) \n      {\n          study_dur = 0;\n\n      }\n    }\n  }\n\n  Brain.Screen.clearScreen();\n  Brain.Screen.setCursor(1, 1);\n  Brain.Screen.print(\"Session Complete\");\n  wait(3, seconds);\n}\n\nvoid startPomodoroCycle()\n{\n  while (true)\n  {\n  phoneJailDoor();\n  runStudySession();\n\n  Brain.Screen.clearScreen();\n  Brain.Screen.setCursor(1, 1);\n  Brain.Screen.print(\"Press + hold bumper\");\n  Brain.Screen.setCursor(2, 1);\n  Brain.Screen.print(\"if task complete\");\n  wait(3, seconds);\n\n  if(Bumper3.pressing())\n  {\n    dispensor(true);\n    searchForPerson();\n    phoneJailDoor();\n    runBreakSession();\n    phoneJailDoor();\n  }\n\n  else\n  {\n    dispensor(false);\n    searchForPerson();\n  }\n\n  Brain.Screen.clearScreen();\n  Brain.Screen.setCursor(1, 1);\n  Brain.Screen.print(\"End cycles?\");\n  wait(2, seconds);\n\n  Brain.Screen.setCursor(2, 1);\n  Brain.Screen.print(\"Press bumper + touch\");\n  wait(2, seconds);\n\n  endBot();\n\n  Brain.Screen.clearScreen();\n  Brain.Screen.setCursor(1, 1);\n  Brain.Screen.print(\"Starting Study Cycle!\");\n  wait(2, seconds);\n\n  }\n\n}\n\nint main() \n{\n  configureAllSensors();\n  Brain.Screen.clearScreen();\n  Brain.Screen.setCursor(1, 1);\n  Brain.Screen.print(\"Touch to start\");\n  wait(2, seconds);\n  touchPressed();\n  startPomodoroCycle();\n\n}\n","textLanguage":"cpp","robotConfig":[{"port":[10],"name":"MotorCatapultH","customName":true,"deviceType":"Motor","deviceClass":"motor","setting":{"reversed":"false","fwd":"forward","rev":"reverse"},"triportSourcePort":22},{"port":[5],"name":"MotorCatapultV","customName":true,"deviceType":"Motor","deviceClass":"motor","setting":{"reversed":"true","fwd":"forward","rev":"reverse"},"triportSourcePort":22},{"port":[8],"name":"Optical8","customName":false,"deviceType":"Optical","deviceClass":"optical","setting":{},"triportSourcePort":22},{"port":[1],"name":"Distance1","customName":false,"deviceType":"Distance","deviceClass":"distance","setting":{},"triportSourcePort":22},{"port":[3],"name":"Bumper3","customName":false,"deviceType":"Bumper","deviceClass":"bumper","setting":{},"triportSourcePort":22},{"port":[9],"name":"TouchLED9","customName":false,"deviceType":"TouchLED","deviceClass":"touchled","setting":{},"triportSourcePort":22},{"port":[6],"name":"MotorPhoneJail","customName":true,"deviceType":"Motor","deviceClass":"motor","setting":{"reversed":"false","fwd":"forward","rev":"reverse"},"triportSourcePort":22},{"port":[2],"name":"MotorDispensor","customName":true,"deviceType":"Motor","deviceClass":"motor","setting":{"reversed":"false","fwd":"forward","rev":"reverse"},"triportSourcePort":22}],"slot":0,"platform":"IQ","sdkVersion":"20230818.11.00.00","appVersion":"4.62.0","fileFormat":"2.0.0","targetBrainGen":"Second","v5SoundsEnabled":false,"aiVisionSettings":{"colors":[],"codes":[],"tags":true,"AIObjects":true,"AIObjectModel":[],"aiModelDropDownValue":""}}